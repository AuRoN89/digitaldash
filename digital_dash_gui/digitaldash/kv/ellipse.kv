#:kivy 1.0

<NeedleEllipse>:
    canvas:
        # Draw our stencil
        StencilPush
        Ellipse:
            size: self.sizex, self.sizey
            pos: self.width / 2 - self.sizex / 2, self.height / 2 - self.sizey / 2
            angle_start: self.angle_start
            angle_end: self.update
        StencilUse

        # Now we want to draw our gauge and crop it
        Ellipse:
            size: self.sizex, self.sizey
            pos: self.width / 2 - self.sizex / 2, self.height / 2 - self.sizey / 2
            source: self.source
            angle_start: self.angle_start
            angle_end: self.update
        StencilUnUse

        # Redraw our stencil to remove it
        Ellipse:
            size: self.sizex, self.sizey
            pos: self.width / 2 - self.sizex / 2, self.height / 2 - self.sizey / 2
            angle_start: self.angle_start
            angle_end: self.update
        StencilPop
