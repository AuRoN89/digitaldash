#:kivy 1.0

<NeedleEllipse>:
    canvas:
        # Draw our stencil
        StencilPush
        Ellipse:
            size: (min(self.size), min(self.size))
            pos: (self.width / 2 - min(self.width, self.height) / 2, 0)
            angle_start: self.angle_start
            angle_end: self.update
        StencilUse

        # Now we want to draw our gauge and crop it
        Ellipse:
            size: (min(self.size), min(self.size))
            pos: (self.width / 2 - min(self.width, self.height) / 2, 0)
            source: self.source
            angle_start: self.angle_start
            angle_end: self.update
        StencilUnUse

        # Redraw our stencil to remove it
        Ellipse:
            pos: (self.width / 2 - min(self.width, self.height) / 2, 0)
            pos: (self.width / 2, self.center_y)
            angle_start: self.angle_start
            angle_end: self.update
        StencilPop
