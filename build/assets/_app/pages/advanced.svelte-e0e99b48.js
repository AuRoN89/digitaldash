import{S as a,i as s,s as t,e,t as c,c as n,a as l,b as r,d as i,o,f as d,g as h,j as f,l as u,Q as m,J as p,n as v,P as g,G as S,I as b,H as y}from"../chunks/stores-67155c76.js";function E(a){let s,t;return{c(){s=e("div"),t=c("Invalid JSON"),this.h()},l(a){s=n(a,"DIV",{class:!0});var e=l(s);t=r(e,"Invalid JSON"),e.forEach(i),this.h()},h(){o(s,"class","alert alert-danger")},m(a,e){d(a,s,e),h(s,t)},d(a){a&&i(s)}}}function O(a){let s,t,S,b,y,O,I,J,N=a[1]&&E();return{c(){s=e("div"),N&&N.c(),t=f(),S=e("textarea"),b=f(),y=e("button"),O=c("Save"),this.h()},l(a){s=n(a,"DIV",{class:!0});var e=l(s);N&&N.l(e),t=u(e),S=n(e,"TEXTAREA",{class:!0}),l(S).forEach(i),b=u(e),y=n(e,"BUTTON",{disabled:!0,class:!0,type:!0});var c=l(y);O=r(c,"Save"),c.forEach(i),e.forEach(i),this.h()},h(){o(S,"class","form-control svelte-rfhj3t"),y.disabled=a[1],o(y,"class","mt-2 form-control"),o(y,"type","submit"),o(s,"class","col-12 pr-4 pl-4 advanced")},m(e,c){d(e,s,c),N&&N.m(s,null),h(s,t),h(s,S),m(S,a[0]),h(s,b),h(s,y),h(y,O),I||(J=[p(S,"input",a[3]),p(y,"click",a[2])],I=!0)},p(a,[e]){a[1]?N||(N=E(),N.c(),N.m(s,t)):N&&(N.d(1),N=null),1&e&&m(S,a[0]),2&e&&(y.disabled=a[1])},i:v,o:v,d(a){a&&i(s),N&&N.d(),I=!1,g(J)}}}function I(a,s,t){let e;S(a,y,(a=>t(4,e=a)));let c=JSON.stringify(e.configuration,null,2);let n=!1;return a.$$.update=()=>{if(1&a.$$.dirty)try{JSON.parse(c),t(1,n=!1)}catch(s){t(1,n=!0)}},[c,n,function(){fetch("/api/config",{method:"POST",body:c}).then((a=>a.json())).then((a=>{b(y,e.configuration=a.config,e),b(y,e.actions=[{id:e.count,msg:a.message,theme:a.ret?"alert-info":"alert-danger"},...e.actions],e)}))},function(){c=this.value,t(0,c)}]}export default class extends a{constructor(a){super(),s(this,a,I,O,t,{})}}
