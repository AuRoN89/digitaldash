/* src/routes/login.svelte generated by Svelte v3.32.0 */
import {
	add_attribute,
	create_ssr_component,
	set_store_value,
	subscribe
} from "../../_snowpack/pkg/svelte/internal.js";

import { goto } from "../assets/runtime/app/navigation.js";
import { session } from "../assets/runtime/app/stores.js";

const Login = create_ssr_component(($$result, $$props, $$bindings, slots) => {
	let $session, $$unsubscribe_session;
	$$unsubscribe_session = subscribe(session, value => $session = value);
	session.subscribe($$value => $session = $$value);
	let username;
	let password;

	function handleSubmit(event) {
		fetch("/api/auth", {
			method: "POST",
			mode: "cors",
			credentials: "same-origin",
			body: JSON.stringify({ Username: username, Password: password })
		}).then(d => d.json()).then(d => {
			if (d.ret) {
				set_store_value(session, $session.User = d.user, $session);
				goto("/");
			} else // Only add notification for failed login
			{
				set_store_value(
					session,
					$session.actions = [
						{
							id: $session.count,
							msg: d.message,
							theme: "alert-danger"
						},
						...$session.actions
					],
					$session
				);
			}
		});
	}

	$$unsubscribe_session();

	return `<div class="${"col-sm-12 col-md-6 justify-content-center d-flex"}"><form class="${"form-signin"}"><div class="${"text-center container"}"><img src="${"images/logo.png"}" alt="${""}" width="${"72"}" height="${"72"}">
      <h1 class="${"h3 mb-3 font-weight-normal"}">Please sign in</h1></div>

    <div class="${"form-label-group"}"><input type="${"text"}" name="${"username"}" id="${"Username"}" class="${"mb-2 form-control"}" placeholder="${"username"}" required${add_attribute("value", username, 1)}>
      <label for="${"username"}">Username</label></div>

    <div class="${"form-label-group"}"><input type="${"password"}" name="${"password"}" id="${"password"}" class="${"mb-2 form-control"}" placeholder="${"Password"}" required${add_attribute("value", password, 1)}>
      <label for="${"password"}">Password</label></div>

    <button class="${"btn btn-lg btn-primary btn-block"}" type="${"submit"}">Sign in</button></form></div>`;
});

export default Login;
//# sourceMappingURL=login.svelte.js.map
