#:kivy 1.0

<NeedleLinear>:
    canvas:
        # Draw our stencil
        StencilPush
        Rectangle:
            pos: (self.width / 2 - min(self.width, self.height) / 2, self.center_y)
            size: self.update, self.height / 2
        StencilUse
        # Now we want to draw our gauge and crop it
        Color:
            rgba: self.r, self.g, self.b, self.a
        Rectangle:
            pos: (self.width / 2 - min(self.width, self.height) / 2, self.center_y)
            size: self.update, self.height / 2
            source: self.source
        StencilUnUse

        # Redraw our stencil to remove it
        Rectangle:
            pos: (self.width / 2 - min(self.width, self.height) / 2, self.center_y)
            size: self.update, self.height / 2
        StencilPop
